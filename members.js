

/*
  { Deceased
    "firstname": "Fanny",
    "lastname": "Guarino",
    "role": "Covenant Member",
    "date": " November 2022",
    "gender": "woman"
  },
  { Excommunicated: 11/26/2023
    "firstname": "Junariez",
    "lastname": "Musngi",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "men"
  },
  ,
{ Gracious Removal \: 02.2024
    "firstname": "Dhon",
    "lastname": "Timblor",
    "role": "Associate Member",
    "date": "2018",
    "gender": "men"
  }
  ,
{ Resigned: April 15, 2024
    "firstname": "Cristine",
    "lastname": "Cance",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "woman"
  }
*/

let members = `[
  {
    "firstname": "Jeremiah",
    "lastname": "Jangad",
    "role": "Pastor, Covenant Member",
    "date": "2013",
    "gender": "men"
  },
  {
    "firstname": "Mary Joy",
    "lastname": "Jangad",
    "role": "Covenant Member",
    "date": "2013",
    "gender": "woman"
    
  },
{
    "firstname": "Joenel",
    "lastname": "Afable",
    "role": "Covenant Member",
    "date": "2013",
    "gender": "men"
  },
{
    "firstname": "Harry",
    "lastname": "Gonzales",
    "role": "Covenant Member",
    "date": "2014",
    "gender": "men"
  },
{
    "firstname": "Lorenzo",
    "lastname": "Tating Jr.",
    "role": "Deacon, Covenant Member",
    "date": "2015",
    "gender": "men"
  },
{
    "firstname": "Riza",
    "lastname": "Tating",
    "role": "Covenant Member",
    "date": "2015",
    "gender": "woman"
  },
{
    "firstname": "Jeff",
    "lastname": "Chavez",
    "role": "Deacon, Covenant Member",
    "date": "2016",
    "gender": "men"
  },
{
    "firstname": "Gloryben",
    "lastname": "Chavez",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "woman"
  },
{
    "firstname": "Eliseo",
    "lastname": "Openio",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "men"
  },
{
    "firstname": "Elena",
    "lastname": "Openio",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "woman"
  },
{
    "firstname": "Remy",
    "lastname": "Lagucay",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "woman"
  },
{
    "firstname": "Henry",
    "lastname": "Sealongo",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "men"
  },
{
    "firstname": "Lorna",
    "lastname": "Sealongo",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "woman"
  },
{
    "firstname": "Creziel",
    "lastname": "Mercado",
    "role": "Covenant Member",
    "date": "2016",
    "gender": "woman"
  },
{
    "firstname": "Ruby",
    "lastname": "Sarco",
    "role": "Covenant Member",
    "date": "2017",
    "gender": "woman"
  },
{
    "firstname": "Sam",
    "lastname": "Tacdoro",
    "role": "Covenant Member",
    "date": "2017",
    "gender": "men"
  },
{
    "firstname": "Divine",
    "lastname": "Tacdoro",
    "role": "Covenant Member",
    "date": "2017",
    "gender": "woman"
  },
{
    "firstname": "Cristina",
    "lastname": "Olo",
    "role": "Covenant Member",
    "date": "2017",
    "gender": "woman"
  },
{
    "firstname": "Jordan",
    "lastname": "Ravanes",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Jerry",
    "lastname": "del Mundo",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Adora",
    "lastname": "del Mundo",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Esther Joi",
    "lastname": "del Mundo",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Joshua",
    "lastname": "Figueroa",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Jihan",
    "lastname": "Figueroa",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Mercy",
    "lastname": "Figueroa",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Christian David",
    "lastname": "Bare",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Kate",
    "lastname": "Bare",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Psalm",
    "lastname": "Torres",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Christian Joriz",
    "lastname": "Fairbanks",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Genevieve",
    "lastname": "Carrillo",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "woman"
  },
{
    "firstname": "Bar",
    "lastname": "Carrillo",
    "role": "Covenant Member",
    "date": "2018",
    "gender": "men"
  },
{
    "firstname": "Isagani",
    "lastname": "Azur",
    "role": "Deacon, Covenant Member",
    "date": "2019",
    "gender": "men"
  },
{
    "firstname": "Chris John",
    "lastname": "Apinan",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Junilyn",
    "lastname": "Apinan",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Ma. Jesus",
    "lastname": "Solidum",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Stephanie Anne",
    "lastname": "Solidum",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Sarah Allyssa",
    "lastname": "Solidum",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Geno Carlo A.",
    "lastname": "Miravalles",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Rochelle Veronica P.",
    "lastname": "Miravalles",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Ernest Jay",
    "lastname": "Brun",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Erniela Jam",
    "lastname": "Brun",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "Maria Cecilla G.",
    "lastname": "Azur",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "woman"
  },
{
    "firstname": "John Charles",
    "lastname": "Lazaro",
    "role": "Associate Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Jhoven",
    "lastname": "Asperin",
    "role": "Associate Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "David",
    "lastname": "Dawal",
    "role": "Associate Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Randy",
    "lastname": "Marchadesch",
    "role": "Associate Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Armel Jay",
    "lastname": "Mercado",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Peter",
    "lastname": "Zambrano",
    "role": "Covenant Member",
    "date": "2021",
    "gender": "men"
  },
{
    "firstname": "Kristine",
    "lastname": "Duhaylungsod",
    "role": "Associate Member",
    "date": "September 2021",
    "gender": "woman"
  },
{
    "firstname": "Tim",
    "lastname": "Duhaylungsod",
    "role": "Associate Member",
    "date": "September 2021",
    "gender": "men"
  },
{
    "firstname": "Flordeliz",
    "lastname": "Gonzales",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "woman"
  },
{
    "firstname": "Angelica",
    "lastname": "Zambrano",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "woman"
  },
{
    "firstname": "Ramon",
    "lastname": "Musngi",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "men"
  },
{
    "firstname": "Marissa",
    "lastname": "Musngi",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "woman"
  },
{
    "firstname": "Aries Jake",
    "lastname": "Montilla",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "men"
  },
{
    "firstname": "Regina",
    "lastname": "Montilla",
    "role": "Covenant Member",
    "date": "December 2021",
    "gender": "woman"
  },
  {
    "firstname": "Vince",
    "lastname": "Tombaga",
    "role": "Covenant Member",
    "date": " January 2022",
    "gender": "men"
  },
  {
    "firstname": "John Philip",
    "lastname": "Erauda",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "men"
  },
  {
    "firstname": "Mary Uson",
    "lastname": "Erauda",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "woman"
  },
  {
    "firstname": "Steven James",
    "lastname": "Llabres",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "men"
  },
  {
    "firstname": "Maribel",
    "lastname": "Llabres",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "woman"
  },
  {
    "firstname": "Ronald Jr.",
    "lastname": "Caceres",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "men"
  },
  {
    "firstname": "Hanna",
    "lastname": "Caceres",
    "role": "Covenant Member",
    "date": " September 2022",
    "gender": "woman"
  },
  {
    "firstname": "Kiel Cedric",
    "lastname": "Ramos",
    "role": "Covenant Member",
    "date": "November 2022",
    "gender": "men"
  },
  {
    "firstname": "Jon Emil",
    "lastname": "Bacus",
    "role": "Covenant Member",
    "date": "November 2022",
    "gender": "men"
  },
  {
    "firstname": "Lailanie",
    "lastname": "Dela Cruz",
    "role": "Covenant Member",
    "date": "November 2022",
    "gender": "woman"
  },
  {
    "firstname": "Jeremiah T",
    "lastname": "Arellano",
    "role": "Covenant Member",
    "date": "November 2022",
    "gender": "men"
  },
  {
    "firstname": "Gerry",
    "lastname": "Guarino",
    "role": "Covenant Member",
    "date": " November 2022",
    "gender": "men"
  },

  {
    "firstname": "Lawrence",
    "lastname": "Castillo",
    "role": "Covenant Member",
    "date": " January 2023",
    "gender": "men"
  },
  {
    "firstname": "Jewel",
    "lastname": "Rodriguez",
    "role": "Covenant Member",
    "date": "May 2023",
    "gender": "men"
  },
  {
    "firstname": "Marissa 'Issa'",
    "lastname": "Rodriguez",
    "role": "Covenant Member",
    "date": "May 2023",
    "gender": "woman"
  },
  {
    "firstname": "Aizalee",
    "lastname": "Dawal",
    "role": "Covenant Member",
    "date": "May 2023",
    "gender": "woman"
  },
  {
    "firstname": "Elijah",
    "lastname": "Aquino",
    "role": "Covenant Member",
    "date": "June 2023",
    "gender": "men"
  },
  {
    "firstname": "Arrahjane Grace",
    "lastname": "Aquino",
    "role": "Covenant Member",
    "date": "June 2023",
    "gender": "woman"
  },
  {
    "firstname": "Darren",
    "lastname": "Delbo",
    "role": "Covenant Member",
    "date": "June 2023",
    "gender": "men"
  },
  {
    "firstname": "Jeffrey 'Popoy'",
    "lastname": "Nilo",
    "role": "Covenant Member",
    "date": "August 2023",
    "gender": "men"
  },
  {
    "firstname": "Rose Anne Margaret",
    "lastname": "Nilo",
    "role": "Covenant Member",
    "date": "August 2023",
    "gender": "woman"
  },
  {
    "firstname": "Jessica",
    "lastname": "Brun",
    "role": "Covenant Member",
    "date": "August 2023",
    "gender": "woman"
  },
  {
    "firstname": "Allaine",
    "lastname": "Mercado",
    "role": "Covenant Member",
    "date": "August 2023",
    "gender": "woman"
  },
  {
    "firstname": "Angelica Rosh",
    "lastname": "Padua",
    "role": "Covenant Member",
    "date": "August 2023",
    "gender": "woman"
  },
  {
    "firstname": "Janielle", 
    "lastname": "Fajardo",
    "role": "Covenant Member",
    "date": "October 2023",
    "gender": "woman"
  }

  
]`

const membersNew = JSON.parse(members);
const total = membersNew.length;
const membersCard = document.getElementById("row");
const reset = document.getElementById('reset');
const searchMembers = document.getElementById('searchInput');

const displayMembersList = () => {
  const ol = document.createElement('ol')
  membersNew.forEach(member => {
      const li = document.createElement('li')
      li.textContent = `${member.firstname} ${member.lastname}`;
      ol.appendChild(li);
  })  
  membersCard.innerHTML = '';  // Clear the existing content
  membersCard.appendChild(ol);
}

const list = document.getElementById('quick-list')
list.addEventListener('click',displayMembersList)


const showAllMembers = () => {
  const memberList = membersNew.map(member => 
    ` <div class="col col_image">
        <div> <img class="member__image" src="/images/${member.firstname}.jpg"></div>
        <h2 class="main-members-name">${member.firstname} ${member.lastname}</h2>
        <p class="member-description">${member.role}</p>
        <p>Since: ${member.date}</p>
  </div>`  
  )
  membersCard.innerHTML = memberList;

  const showTotal = () => { 
    const myText = document.getElementById("showTotal");
    myText.innerText = total;
  } 
  showTotal()
  
}

showAllMembers()


const findMatches = (wordToMatch, names) => {
  return names.filter(name => {
    const regex = new RegExp(wordToMatch, 'gi');
    return name.firstname.match(regex) || name.lastname.match(regex) 
          || name.date.match(regex) || name.role.match(regex) || name.gender.match(regex);
  })
}


const displayMatches = () => {
    const value = searchMembers.value;
    const matchArray = findMatches(value, membersNew);
    const showTotalResults = () => { 
      const myText = document.getElementById("showTotal");
      myText.innerText = matchArray.length;
    }
    showTotalResults()

    const html =  matchArray.map(member => 
      ` <div class="col col_image">
      <div> <img class="member__image" src="/images/${member.firstname}.jpg"></div>
      <h2 class="main-members-name">${member.firstname} ${member.lastname}</h2>
      <p class="member-description">${member.role}</p>
      <p>Since: ${member.date}</p>
        </div>`     
    )
    const showMembers = document.getElementById("row").innerHTML = html;

    if (matchArray.length == 0) {
      document.getElementById("row").innerHTML = `<h2 class="results">No Results Found</h2>`;
    } 
    return showMembers;
}

searchMembers.addEventListener('keyup', displayMatches);

reset.addEventListener('click', () => location.reload());

const sorter = document.getElementById('sort-list')

sortData = () => {
  const sortBy = sorter.value
  membersNew.sort((a,b) => {
    // If sorting by date, extract the year part for comparison
    if (sortBy === 'date') {
      const yearA = parseInt(a[sortBy].split(' ')[1]); // Extract year from date string
      const yearB = parseInt(b[sortBy].split(' ')[1]); // Extract year from date string
      console.log('Year A:', yearA);
      console.log('Year B:', yearB);
      if (yearA < yearB) return -1;
      if (yearA > yearB) return 1;
      return 0;
    } else {
       switch (sortBy) {
          case "firstName":
            return a.firstname.localeCompare(b.firstname);
          case "lastName":
            return a.lastname.localeCompare(b.lastname);
          default:
            console.log('data sorted')
            return a.role - b.role;
       }
    }
    // switch (sortBy) {
    //   case "firstName":
    //     return a.firstname.localeCompare(b.firstname);
    //   case "lastName":
    //     return a.lastname.localeCompare(b.lastname);
    //   case "date":
    //     return a.date.localeCompare(b.date)
    //   default:
        
    //     return a.role - b.role;
    // }
    
  })

  showSortedData(membersNew)
}





const showSortedData = (sortedData) => {
  const html =  sortedData.map(member => 
      ` <div class="col col_image">
      <div> <img class="member__image" src="/images/${member.firstname}.jpg"></div>
      <h2 class="main-members-name">${member.firstname} ${member.lastname}</h2>
      <p class="member-description">${member.role}</p>
      <p>Since: ${member.date}</p>
        </div>`     
    )
    membersCard.innerHTML = html.join('')
}
sorter.addEventListener('change', sortData)


// searchYear.addEventListener('change', displayMatches(value2));






// console.log(membersNew[1])
// const ordered = membersNew.sort((a, b) => {
//   if(a.date > b.date) {
//     return 1;
//   } else {
//     return -1;
//   }
// })

// console.table(ordered);


  //     "firstname": "Christian",
  //     "lastname": "Francisco",
  //     "role": "Deacon, Covenant Member",
  //     "date": "2021"
  //   },
  // {
  //     "firstname": "Shana",
  //     "lastname": "Francisco",
  //     "role": "Covenant Member",
  //     "date": "2021"
  //   },